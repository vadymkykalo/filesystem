# üéØ –°–∏—Å—Ç–µ–º–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–≥–æ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥—É

–¶–µ Quarkus –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–≥–æ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥—É –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö —É–º–æ–≤ —Ç–∞ –ª–æ–≥—ñ—á–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤.

## üìã –ó–º—ñ—Å—Ç

- [–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏](#–æ–≥–ª—è–¥-—Å–∏—Å—Ç–µ–º–∏)
- [–Ø–∫ –ø—Ä–∞—Ü—é—î —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥](#—è–∫-–ø—Ä–∞—Ü—é—î-—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥)
- [–¢–∏–ø–∏ –ø–æ–ª—ñ–≤ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤](#—Ç–∏–ø–∏-–ø–æ–ª—ñ–≤-—Ç–∞-–æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤)
- [API endpoints](#api-endpoints)
- [–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥–∏-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
- [–ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É](#–∑–∞–ø—É—Å–∫-–¥–æ–¥–∞—Ç–∫—É)

## üé™ –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ **–≥–Ω—É—á–∫—ñ —Ñ—ñ–ª—å—Ç—Ä–∏** –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä—ñ–∑–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:
- SMID (—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
- –ö—Ä–∞—ó–Ω–∞
- –û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
- –í–µ—Ä—Å—ñ—è –∫–ª—ñ—î–Ω—Ç–∞
- –ë—Ä–∞—É–∑–µ—Ä
- –¢–∏–ø —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –§–∞–π–ª–∏ –≤–∏–±–æ—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## üîß –Ø–∫ –ø—Ä–∞—Ü—é—î —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—ñ–ª—å—Ç—Ä–∞

–ö–æ–∂–µ–Ω —Ñ—ñ–ª—å—Ç—Ä —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑:
- **–ö–æ—Ä–Ω–µ–≤—ñ —É–º–æ–≤–∏** - –∑–∞–≤–∂–¥–∏ –∑'—î–¥–Ω—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `AND`
- **–ì—Ä—É–ø–∏ —É–º–æ–≤** - –∫–æ–∂–Ω–∞ –≥—Ä—É–ø–∞ –º–∞—î —Å–≤—ñ–π –ª–æ–≥—ñ—á–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä (`AND` –∞–±–æ `OR`)
- **–§—ñ–Ω–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞**: `–∫–æ—Ä–Ω–µ–≤—ñ_—É–º–æ–≤–∏ AND –≥—Ä—É–ø–∞1 AND –≥—Ä—É–ø–∞2 AND ...`

### –ü—Ä–∏–∫–ª–∞–¥–∏ –ª–æ–≥—ñ–∫–∏

#### 1. –ü—Ä–æ—Å—Ç–∏–π —Ñ—ñ–ª—å—Ç—Ä (—Ç—ñ–ª—å–∫–∏ –∫–æ—Ä–Ω–µ–≤—ñ —É–º–æ–≤–∏)
```json
{
  "conditions": [
    {"fieldType": "COUNTRY", "operator": "EQUAL", "fieldValue": "UA"},
    {"fieldType": "OPERATING_SYSTEM", "operator": "CONTAINS", "fieldValue": "Android"}
  ]
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `–ö–†–ê–á–ù–ê=UA AND ANDROID`

#### 2. –°–∫–ª–∞–¥–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä –∑ –≥—Ä—É–ø–∞–º–∏
```json
{
  "conditions": [
    {"fieldType": "COUNTRY", "operator": "EQUAL", "fieldValue": "UA"}
  ],
  "groups": [
    {
      "groupName": "SMID –≥—Ä—É–ø–∞",
      "logicalOperator": "OR",
      "conditions": [
        {"fieldType": "SMID", "operator": "EQUAL", "fieldValue": "111"},
        {"fieldType": "SMID", "operator": "EQUAL", "fieldValue": "222"}
      ]
    }
  ]
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `–ö–†–ê–á–ù–ê=UA AND (SMID=111 OR SMID=222)`

#### 3. –î—É–∂–µ —Å–∫–ª–∞–¥–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä
```json
{
  "conditions": [
    {"fieldType": "DISTRIBUTION_GROUPS_FILE", "operator": "NOT_IN", "fieldValue": "file-id"}
  ],
  "groups": [
    {
      "logicalOperator": "OR",
      "conditions": [
        {"fieldType": "OPERATING_SYSTEM", "operator": "CONTAINS", "fieldValue": "Android"},
        {"fieldType": "OPERATING_SYSTEM", "operator": "CONTAINS", "fieldValue": "iOS"}
      ]
    },
    {
      "logicalOperator": "OR", 
      "conditions": [
        {"fieldType": "BROWSER", "operator": "CONTAINS", "fieldValue": "Chrome"},
        {"fieldType": "BROWSER", "operator": "CONTAINS", "fieldValue": "Safari"}
      ]
    }
  ]
}
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `–ù–ï_–í_–§–ê–ô–õ–Ü AND (Android OR iOS) AND (Chrome OR Safari)`

## üìä –¢–∏–ø–∏ –ø–æ–ª—ñ–≤ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤

### –¢–∏–ø–∏ –ø–æ–ª—ñ–≤ (FilterFieldType)
- `SMID` - —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `COUNTRY` - –∫—Ä–∞—ó–Ω–∞ (UA, PL, DE, —Ç–æ—â–æ)
- `OPERATING_SYSTEM` - –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
- `CLIENT_VERSION` - –≤–µ—Ä—Å—ñ—è –∫–ª—ñ—î–Ω—Ç–∞
- `BROWSER` - –±—Ä–∞—É–∑–µ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `INTERNET_TYPE` - —Ç–∏–ø —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (Wi-Fi, 4G)
- `DISTRIBUTION_GROUPS_FILE` - —Ñ–∞–π–ª –≤–∏–±–æ—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `INTERNAL_TRANSITION` - –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏
- `CLE_CAMPAIGN` - CLE –∫–∞–º–ø–∞–Ω—ñ—è

### –û–ø–µ—Ä–∞—Ç–æ—Ä–∏ (FilterOperator)
- **–†—ñ–≤–Ω—ñ—Å—Ç—å**: `EQUAL` (=), `NOT_EQUAL` (‚â†)
- **–¢–µ–∫—Å—Ç**: `CONTAINS`, `NOT_CONTAINS`, `STARTS_WITH`, `ENDS_WITH`
- **–ß–∏—Å–ª–∞**: `GREATER_THAN` (>), `LESS_THAN` (<), `GREATER_THAN_OR_EQUAL` (>=), `LESS_THAN_OR_EQUAL` (<=)
- **–°–ø–∏—Å–∫–∏**: `IN`, `NOT_IN`
- **–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ**: `REGEX`, `IS_NULL`, `IS_NOT_NULL`

## üöÄ API Endpoints

### –û—Å–Ω–æ–≤–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
- `GET /api/marketing-target-filters` - –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Ñ—ñ–ª—å—Ç—Ä–∏
- `GET /api/marketing-target-filters/{id}` - –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä –∑–∞ ID
- `GET /api/marketing-target-filters/by-target/{targetId}` - —Ñ—ñ–ª—å—Ç—Ä–∏ –∑–∞ ID —Ç–∞—Ä–≥–µ—Ç—É
- `POST /api/marketing-target-filters` - —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π —Ñ—ñ–ª—å—Ç—Ä
- `PUT /api/marketing-target-filters/{id}` - –æ–Ω–æ–≤–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä
- `DELETE /api/marketing-target-filters/{id}` - –≤–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è
- `POST /api/marketing-target-filters/validate` - –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ—ñ–ª—å—Ç—Ä–∞

### –û—Ü—ñ–Ω–∫–∞ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
- `POST /api/marketing-target-filters/evaluate/{id}` - –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID —Ñ—ñ–ª—å—Ç—Ä–∞
- `POST /api/marketing-target-filters/evaluate` - –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º —É –∑–∞–ø–∏—Ç—ñ

### –î–æ–≤—ñ–¥–∫–æ–≤—ñ –¥–∞–Ω—ñ
- `GET /api/marketing-target-filters/field-types` - –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç–∏–ø–∏ –ø–æ–ª—ñ–≤
- `GET /api/marketing-target-filters/operators` - –¥–æ—Å—Ç—É–ø–Ω—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
- `GET /api/marketing-target-filters/logical-operators` - –ª–æ–≥—ñ—á–Ω—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏

## üí° –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞
```bash
curl -X POST http://localhost:8080/api/marketing-target-filters \
  -H "Content-Type: application/json" \
  -d '{
    "filterName": "–¢—ñ–ª—å–∫–∏ –£–∫—Ä–∞—ó–Ω–∞",
    "marketingTargetId": 1,
    "description": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ –£–∫—Ä–∞—ó–Ω–∏",
    "isActive": true,
    "conditions": [
      {
        "fieldType": "COUNTRY",
        "operator": "EQUAL",
        "fieldValue": "UA",
        "orderIndex": 0
      }
    ]
  }'
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞
```bash
curl -X POST http://localhost:8080/api/marketing-target-filters \
  -H "Content-Type: application/json" \
  -d '{
    "filterName": "–ú–æ–±—ñ–ª—å–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –£–∫—Ä–∞—ó–Ω–∏",
    "marketingTargetId": 1,
    "description": "Android –∞–±–æ iOS –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ –£–∫—Ä–∞—ó–Ω–∏",
    "isActive": true,
    "conditions": [
      {
        "fieldType": "COUNTRY",
        "operator": "EQUAL",
        "fieldValue": "UA",
        "orderIndex": 0
      }
    ],
    "groups": [
      {
        "groupName": "–ú–æ–±—ñ–ª—å–Ω—ñ –û–°",
        "logicalOperator": "OR",
        "orderIndex": 0,
        "conditions": [
          {
            "fieldType": "OPERATING_SYSTEM",
            "operator": "CONTAINS",
            "fieldValue": "Android",
            "orderIndex": 0
          },
          {
            "fieldType": "OPERATING_SYSTEM",
            "operator": "CONTAINS",
            "fieldValue": "iOS",
            "orderIndex": 1
          }
        ]
      }
    ]
  }'
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```bash
curl -X POST http://localhost:8080/api/marketing-target-filters/evaluate/1 \
  -H "Content-Type: application/json" \
  -d '{
    "smid": "3586067540",
    "country": "UA",
    "operatingSystem": "Android 12",
    "clientVersion": "2.1.0",
    "browser": "Chrome",
    "language": "uk"
  }'
```

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ—ñ–ª—å—Ç—Ä–∞
```bash
curl -X POST http://localhost:8080/api/marketing-target-filters/validate \
  -H "Content-Type: application/json" \
  -d '{
    "filterName": "–¢–µ—Å—Ç —Ñ—ñ–ª—å—Ç—Ä",
    "marketingTargetId": 1,
    "conditions": [
      {
        "fieldType": "COUNTRY",
        "operator": "EQUAL",
        "fieldValue": "UA"
      }
    ]
  }'
```

## üéØ –†–µ–∞–ª—å–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ü—Ä–µ–º–∏—É–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
**–ú–µ—Ç–∞**: –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ iOS –∑ –Ω–æ–≤–∏–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏ –∑ —Ä–æ–∑–≤–∏–Ω–µ–Ω–∏—Ö –∫—Ä–∞—ó–Ω
```
iOS AND VERSION>=3.0.0 AND (US OR DE OR UK)
```

### 2. –†–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∞ –∫–∞–º–ø–∞–Ω—ñ—è
**–ú–µ—Ç–∞**: –£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ –ø–µ–≤–Ω–∏–º–∏ SMID, –∞–ª–µ –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ
```
–ö–†–ê–á–ù–ê=UA AND (SMID_380* OR SMID_050*) AND –ù–ï_–í_–§–ê–ô–õ–Ü_–ë–õ–û–ö–£–í–ê–ù–ù–Ø
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
**–ú–µ—Ç–∞**: –ê–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ Android –∑ –Ω–æ–≤–∏–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏
```
Android AND VERSION>2.0.0 AND –ù–ï_–¢–ï–°–¢–û–í–Ü_–ö–û–†–ò–°–¢–£–í–ê–ß–Ü
```

## üõ† –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É

### –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏
```bash
./gradlew quarkusDev
```
–î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8080

### –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
```bash
./gradlew clean build -x test
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
```bash
./gradlew test
```

### Dev UI
–£ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π Dev UI: http://localhost:8080/q/dev/

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
src/main/java/com/minio/
‚îú‚îÄ‚îÄ dto/                    # DTO –∫–ª–∞—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterDto.java
‚îÇ   ‚îú‚îÄ‚îÄ FilterConditionDto.java
‚îÇ   ‚îú‚îÄ‚îÄ FilterGroupDto.java
‚îÇ   ‚îú‚îÄ‚îÄ UserRequestDto.java
‚îÇ   ‚îî‚îÄ‚îÄ EvaluationRequestDto.java
‚îú‚îÄ‚îÄ model/                  # Entity –∫–ª–∞—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilter.java
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterCondition.java
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterGroup.java
‚îÇ   ‚îú‚îÄ‚îÄ FilterFieldType.java
‚îÇ   ‚îú‚îÄ‚îÄ FilterOperator.java
‚îÇ   ‚îî‚îÄ‚îÄ LogicalOperator.java
‚îú‚îÄ‚îÄ repository/             # –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterRepository.java
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterConditionRepository.java
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterGroupRepository.java
‚îÇ   ‚îî‚îÄ‚îÄ MarketingTargetListItemRepository.java
‚îú‚îÄ‚îÄ service/                # –ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ MarketingTargetFilterService.java
‚îÇ   ‚îî‚îÄ‚îÄ FilterEvaluationService.java
‚îî‚îÄ‚îÄ resource/               # REST endpoints
    ‚îî‚îÄ‚îÄ MarketingTargetFilterResource.java

examples/                   # –ü—Ä–∏–∫–ª–∞–¥–∏ API
‚îú‚îÄ‚îÄ filter-api-examples.json
‚îî‚îÄ‚îÄ all-filter-variations.json
```

## üîç –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ–ª—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É –≤–µ—Ä—Å—ñ–π –∫–ª—ñ—î–Ω—Ç–∞

### –û—Ü—ñ–Ω–∫–∞ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö –ª–æ–≥—ñ—á–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
- –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—ñ–≤ –≤–∏–±–æ—Ä–∫–∏
- –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- PostgreSQL –∑ Hibernate ORM
- Named queries –≤ XML –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º—ñ–≥—Ä–∞—Ü—ñ–π —á–µ—Ä–µ–∑ Liquibase

## üîß –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–æ–≤–∞–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏–º–∏ —Ç–∏–ø–∞–º–∏ –ø–æ–ª—ñ–≤ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏. –û—Å—å —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø—É –ø–æ–ª—è

#### 1. –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø –≤ enum `FilterFieldType`
```java
// src/main/java/com/minio/model/FilterFieldType.java
public enum FilterFieldType {
    // ... —ñ—Å–Ω—É—é—á—ñ —Ç–∏–ø–∏
    NEW_FIELD_TYPE("NEW_FIELD_TYPE");  // –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø
}
```

#### 2. –û–Ω–æ–≤–∏—Ç–∏ `UserRequestDto`
```java
// src/main/java/com/minio/dto/UserRequestDto.java
public class UserRequestDto {
    // –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –ø–æ–ª–µ
    private String newFieldValue;
    
    // –î–æ–¥–∞—Ç–∏ getter/setter
    public String getNewFieldValue() { return newFieldValue; }
    public void setNewFieldValue(String value) { this.newFieldValue = value; }
    
    // –û–Ω–æ–≤–∏—Ç–∏ –º–µ—Ç–æ–¥ getFieldValue()
    public String getFieldValue(String fieldType) {
        switch (fieldType) {
            // ... —ñ—Å–Ω—É—é—á—ñ –∫–µ–π—Å–∏
            case "NEW_FIELD_TYPE": return newFieldValue;
        }
    }
}
```

#### 3. –î–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –æ—Ü—ñ–Ω–∫–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞)
```java
// src/main/java/com/minio/service/FilterEvaluationService.java
private boolean evaluateCondition(FilterConditionDto condition, UserRequestDto userRequest) {
    // –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø—É –ø–æ–ª—è
    if (condition.getFieldType() == FilterFieldType.NEW_FIELD_TYPE) {
        return evaluateNewFieldType(condition, userRequest);
    }
    // ... —Ä–µ—à—Ç–∞ –ª–æ–≥—ñ–∫–∏
}

private boolean evaluateNewFieldType(FilterConditionDto condition, UserRequestDto userRequest) {
    // –í–∞—à–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ç—É—Ç
    String fieldValue = userRequest.getNewFieldValue();
    // ... –æ–±—Ä–æ–±–∫–∞
}
```

#### 4. –û–Ω–æ–≤–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞)
```java
// src/main/java/com/minio/service/MarketingTargetFilterService.java
private void validateConditions(List<FilterConditionDto> conditions, String context) {
    for (FilterConditionDto condition : conditions) {
        // –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø—É
        if (condition.getFieldType() == FilterFieldType.NEW_FIELD_TYPE) {
            // –í–∞—à—ñ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
            if (condition.getOperator() != FilterOperator.EQUAL) {
                throw new RuntimeException("NEW_FIELD_TYPE supports only EQUAL operator");
            }
        }
    }
}
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

#### 1. –î–æ–¥–∞—Ç–∏ –≤ enum `FilterOperator`
```java
// src/main/java/com/minio/model/FilterOperator.java
public enum FilterOperator {
    // ... —ñ—Å–Ω—É—é—á—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
    NEW_OPERATOR("NewOp");  // –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä
}
```

#### 2. –î–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –≤ `FilterEvaluationService`
```java
// src/main/java/com/minio/service/FilterEvaluationService.java
switch (operator) {
    // ... —ñ—Å–Ω—É—é—á—ñ –∫–µ–π—Å–∏
    case NEW_OPERATOR:
        return evaluateNewOperator(fieldValue, conditionValue);
}

private boolean evaluateNewOperator(String fieldValue, String conditionValue) {
    // –í–∞—à–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
    return fieldValue.someNewLogic(conditionValue);
}
```

### –ü—Ä–∏–∫–ª–∞–¥: –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è "AGE" –∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º "BETWEEN"

#### 1. –î–æ–¥–∞—Ç–∏ —Ç–∏–ø –ø–æ–ª—è
```java
public enum FilterFieldType {
    // ... —ñ—Å–Ω—É—é—á—ñ
    AGE("AGE");
}
```

#### 2. –î–æ–¥–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä
```java
public enum FilterOperator {
    // ... —ñ—Å–Ω—É—é—á—ñ
    BETWEEN("Between");
}
```

#### 3. –û–Ω–æ–≤–∏—Ç–∏ UserRequestDto
```java
private Integer age;

public String getFieldValue(String fieldType) {
    switch (fieldType) {
        // ... —ñ—Å–Ω—É—é—á—ñ
        case "AGE": return age != null ? age.toString() : null;
    }
}
```

#### 4. –î–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –æ—Ü—ñ–Ω–∫–∏
```java
case BETWEEN:
    // –û—á—ñ–∫—É—î–º–æ —Ñ–æ—Ä–º–∞—Ç "18-65"
    String[] range = conditionValue.split("-");
    int userAge = Integer.parseInt(fieldValue);
    int minAge = Integer.parseInt(range[0]);
    int maxAge = Integer.parseInt(range[1]);
    return userAge >= minAge && userAge <= maxAge;
```

### –ú—ñ–≥—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

–ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ–ª—ñ–≤, –º–æ–∂–ª–∏–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ö–µ–º—É –ë–î:

```sql
-- –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ enum
ALTER TYPE filter_field_type ADD VALUE 'NEW_FIELD_TYPE';
ALTER TYPE filter_operator ADD VALUE 'NEW_OPERATOR';
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø–æ–ª—ñ–≤

–î–æ–¥–∞–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤ `examples/all-filter-variations.json`:

```json
{
  "newFieldExample": {
    "filterName": "–¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è",
    "conditions": [
      {
        "fieldType": "NEW_FIELD_TYPE",
        "operator": "NEW_OPERATOR",
        "fieldValue": "test-value"
      }
    ]
  }
}
```

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è:

- [ ] –î–æ–¥–∞—Ç–∏ –≤ `FilterFieldType` enum
- [ ] –î–æ–¥–∞—Ç–∏ –ø–æ–ª–µ –≤ `UserRequestDto`
- [ ] –û–Ω–æ–≤–∏—Ç–∏ –º–µ—Ç–æ–¥ `getFieldValue()` –≤ `UserRequestDto`
- [ ] –î–æ–¥–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É –≤ `FilterEvaluationService` (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤ `MarketingTargetFilterService` (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –û–Ω–æ–≤–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –î–æ–¥–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
- [ ] –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏

**–°–∏—Å—Ç–µ–º–∞ –¥—É–∂–µ –≥–Ω—É—á–∫–∞ –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è!** –ë—ñ–ª—å—à—ñ—Å—Ç—å –Ω–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ª–∏—à–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤ enum —Ç–∞ DTO, –±–µ–∑ –∑–º—ñ–Ω –æ—Å–Ω–æ–≤–Ω–æ—ó –ª–æ–≥—ñ–∫–∏.

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ —Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∏—Ö –∫–∞–º–ø–∞–Ω—ñ–π –∑ –≥–Ω—É—á–∫–∏–º —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤!
